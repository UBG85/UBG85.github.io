function CMain(e){var t,i,s,r=0,o=0,a=STATE_LOADING;this.initContainer=function(){s_oCanvas=document.getElementById("canvas"),s_oStage=new createjs.Stage(canvas),createjs.Touch.enable(s_oStage),s_oStage.preventSelection=!1,!1===(s_bMobile=jQuery.browser.mobile)?(s_oStage.enableMouseOver(20),$("body").on("contextmenu","#canvas",(function(e){return!1})),FPS=FPS_DESKTOP,FPS_TIME=1e3/FPS,PHYSICS_STEP=1/(FPS*STEP_RATE),ROLL_BALL_RATE=60/FPS):BALL_VELOCITY_MULTIPLIER=.8,s_iPrevTime=(new Date).getTime(),createjs.Ticker.addEventListener("tick",this._update),createjs.Ticker.framerate=FPS,navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=!0),s_oSpriteLibrary=new CSpriteLibrary,s_oNetworkManager=new CNetworkManager,s=new CPreloader,t=!0},this.soundLoaded=function(){r++;var e=Math.floor(r/o*100);s.refreshLoader(e)},this._initSounds=function(){(s_aSoundsInfo=new Array).push({path:"./sounds/",filename:"drop_bounce_grass",loop:!1,volume:1,ingamename:"drop_bounce_grass"}),s_aSoundsInfo.push({path:"./sounds/",filename:"click",loop:!1,volume:1,ingamename:"click"}),s_aSoundsInfo.push({path:"./sounds/",filename:"kick",loop:!1,volume:1,ingamename:"kick"}),s_aSoundsInfo.push({path:"./sounds/",filename:"ball_saved",loop:!1,volume:1,ingamename:"ball_saved"}),s_aSoundsInfo.push({path:"./sounds/",filename:"goal_keeper",loop:!1,volume:1,ingamename:"goal_keeper"}),s_aSoundsInfo.push({path:"./sounds/",filename:"goal_striker",loop:!1,volume:1,ingamename:"goal_striker"}),s_aSoundsInfo.push({path:"./sounds/",filename:"keep_ball",loop:!1,volume:1,ingamename:"keep_ball"}),s_aSoundsInfo.push({path:"./sounds/",filename:"pole",loop:!1,volume:1,ingamename:"pole"}),s_aSoundsInfo.push({path:"./sounds/",filename:"win",loop:!1,volume:1,ingamename:"win"}),s_aSoundsInfo.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"}),s_aSoundsInfo.push({path:"./sounds/",filename:"crowd",loop:!0,volume:1,ingamename:"crowd"}),s_aSoundsInfo.push({path:"./sounds/",filename:"hurryup",loop:!0,volume:1,ingamename:"hurryup"}),o+=s_aSoundsInfo.length,s_aSounds=new Array;for(var e=0;e<s_aSoundsInfo.length;e++)this.tryToLoadSound(s_aSoundsInfo[e],!1);Howler.volume(.5)},this.tryToLoadSound=function(e,t){setTimeout((function(){s_aSounds[e.ingamename]=new Howl({src:[e.path+e.filename+".mp3"],autoplay:!1,preload:!0,loop:e.loop,volume:e.volume,onload:s_oMain.soundLoaded,onloaderror:function(e,t){for(var i=0;i<s_aSoundsInfo.length;i++)if(e===s_aSounds[s_aSoundsInfo[i].ingamename]._sounds[0]._id){s_oMain.tryToLoadSound(s_aSoundsInfo[i],!0);break}},onplayerror:function(e){for(var t=0;t<s_aSoundsInfo.length;t++)if(e===s_aSounds[s_aSoundsInfo[t].ingamename]._sounds[0]._id){s_aSounds[s_aSoundsInfo[t].ingamename].once("unlock",(function(){s_aSounds[s_aSoundsInfo[t].ingamename].play(),"soundtrack"===s_aSoundsInfo[t].ingamename&&null!==s_oGame&&setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME)}));break}}})}),t?200:0)},this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this),s_oSpriteLibrary.addSprite("logo","./sprites/logo.png"),s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg"),s_oSpriteLibrary.addSprite("but_local","./sprites/but_local.png"),s_oSpriteLibrary.addSprite("but_multiplayer","./sprites/but_multiplayer.png"),s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png"),s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png"),s_oSpriteLibrary.addSprite("ball","./sprites/ball.png"),s_oSpriteLibrary.addSprite("ball_shadow","./sprites/ball_shadow.png"),s_oSpriteLibrary.addSprite("start_ball","./sprites/start_ball.png"),s_oSpriteLibrary.addSprite("hand_touch","./sprites/hand_touch.png"),s_oSpriteLibrary.addSprite("cursor","./sprites/cursor.png"),s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png"),s_oSpriteLibrary.addSprite("msg_box_small","./sprites/msg_box_small.png"),s_oSpriteLibrary.addSprite("bg_levelselect","./sprites/bg_levelselect.jpg"),s_oSpriteLibrary.addSprite("but_level","./sprites/but_level.png"),s_oSpriteLibrary.addSprite("but_info","./sprites/but_info.png"),s_oSpriteLibrary.addSprite("logo_ctl","./sprites/logo_ctl.png"),s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png"),s_oSpriteLibrary.addSprite("but_yes","./sprites/but_yes.png"),s_oSpriteLibrary.addSprite("but_no","./sprites/but_no.png"),s_oSpriteLibrary.addSprite("but_level_locked","./sprites/but_level_locked.png"),s_oSpriteLibrary.addSprite("but_next","./sprites/but_next.png"),s_oSpriteLibrary.addSprite("but_restart","./sprites/but_restart.png"),s_oSpriteLibrary.addSprite("but_home","./sprites/but_home.png"),s_oSpriteLibrary.addSprite("but_delete_savings","./sprites/but_delete_savings.png"),s_oSpriteLibrary.addSprite("ball_kick","./sprites/ball_kick.png"),s_oSpriteLibrary.addSprite("score_side_bg","./sprites/score_side_bg.png");for(var e=0;e<NUM_TEAMS;e++)s_oSpriteLibrary.addSprite("flag_"+e,"./sprites/flags/flag_"+e+".png");s_oSpriteLibrary.addSprite("bg_game_striker","./sprites/striker/bg_game_striker.jpg"),s_oSpriteLibrary.addSprite("goal_0","./sprites/striker/goal_0.png");for(var t=0;t<22;t++)for(var i=0;i<=30;i++)s_oSpriteLibrary.addSprite("player_"+t+"_"+i,"./sprites/striker/player/player_"+t+"_"+i+".png");e=0;for(var s=0;s<SPRITE_NAME_GOALKEEPER.length;s++)for(var r=0;r<NUM_SPRITE_GOALKEEPER[s];r++)s_oSpriteLibrary.addSprite(SPRITE_NAME_GOALKEEPER[s]+"_"+e+"_"+r,"./sprites/striker/goalkeeper/"+SPRITE_NAME_GOALKEEPER[s]+"/"+SPRITE_NAME_GOALKEEPER[s]+"_"+e+"_"+r+".png");s_oSpriteLibrary.addSprite("bg_game_gk","./sprites/goalkeeper/bg_game_gk.jpg"),s_oSpriteLibrary.addSprite("gloves","./sprites/goalkeeper/gloves.png"),s_oSpriteLibrary.addSprite("goal_1","./sprites/goalkeeper/goal_1.png"),s_oSpriteLibrary.addSprite("help_mouse","./sprites/goalkeeper/help_mouse.png"),s_oSpriteLibrary.addSprite("help_touch","./sprites/goalkeeper/help_touch.png");for(e=0;e<NUM_TEAMS;e++)s_oSpriteLibrary.addSprite("opponent_"+e,"./sprites/goalkeeper/opponent_"+e+".png");s_oSpriteLibrary.addSprite("but_generic","./sprites/but_generic.png"),s_oSpriteLibrary.addSprite("msg_box_narrow","./sprites/msg_box_narrow.png"),s_oSpriteLibrary.addSprite("but_correct","./sprites/but_correct.png"),s_oSpriteLibrary.addSprite("but_incorrect","./sprites/but_incorrect.png"),s_oSpriteLibrary.addSprite("bonus_shot","./sprites/bonus_shot.png"),s_oSpriteLibrary.addSprite("label_info","./sprites/label_info.png"),o+=s_oSpriteLibrary.getNumSprites(),s_oSpriteLibrary.loadSprites()},this._onImagesLoaded=function(){r++;var e=Math.floor(r/o*100);s.refreshLoader(e)},this._onAllImagesLoaded=function(){},this.preloaderReady=function(){r=0,!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds(),this._loadImages(),t=!0},this._onRemovePreloader=function(){s.unload();try{saveItem("ls_available","ok")}catch(e){s_bStorageAvailable=!1}this.gotoMenu(),s_oSoundtrack=playSound("soundtrack",SOUNDTRACK_GENERAL_VOLUME,!0)},this.saveMatch=function(e,t,i,s,r){saveItem(LOCALSTORAGE_STRING+"match_"+e,JSON.stringify({opponent:t,result:i,score:r,level_score:s}))},this.saveTeam=function(e){saveItem(LOCALSTORAGE_STRING+"team",s_iTeamSelected=e)},this.saveLevel=function(e){e>s_iLastLevel&&(s_iLastLevel=e,saveItem(LOCALSTORAGE_STRING+"level",s_iLastLevel))},this.getStoredTeamSelected=function(){return getItem(LOCALSTORAGE_STRING+"team")},this.getMatches=function(){if(null===getItem(LOCALSTORAGE_STRING+"match_1"))return null;for(var e=new Array,t=1;t<NUM_MATCHES+1;t++)e.push(JSON.parse(getItem(LOCALSTORAGE_STRING+"match_"+t)));return e},this.getLastLevel=function(){var e=getItem(LOCALSTORAGE_STRING+"level");return null===e?1:e},this.getScoreMatch=function(e){var t=getItem(LOCALSTORAGE_STRING+"match_"+e);return JSON.parse(t).level_score},this.getScoreTillLevel=function(e){if(!s_bStorageAvailable)return 0;for(var t=0,i=0;i<e-1;i++)t+=this.getScoreMatch(i+1);return t},this.gotoMenu=function(){new CMenu,a=STATE_MENU},this.gotoLevelPanel=function(){new CLevelMenu,a=STATE_CHOOSE_LEVEL},this.gotoSelectTeam=function(){new CSelectTeamMenu,a=STATE_CHOOSE_TEAM},this.gotoSelectTeamMulti=function(){new CSelectTeamMenu,a=STATE_CHOOSE_TEAM},this.gotoGame=function(e){s_oGame=new CGameSingle(i,e),a=STATE_GAME},this.gotoGameWithBot=function(e){s_oGame=new CGameSingleWithBot(i,e),a=STATE_GAME},this.gotoGameMulti=function(){s_oGame=new CGameMulti(i,1),a=STATE_GAME},this.gotoOfflineMenu=function(){a=STATE_OFFLINE;new COfflineMenu},this.gotoHelp=function(){new CHelp,a=STATE_HELP},this.stopUpdateNoBlock=function(){t=!1,createjs.Ticker.paused=!0},this.startUpdateNoBlock=function(){s_iPrevTime=(new Date).getTime(),t=!0,createjs.Ticker.paused=!1},this.stopUpdate=function(){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||Howler.mute(!0)},this.startUpdate=function(){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_bAudioActive&&Howler.mute(!1)},this._update=function(e){if(!1!==t){var i=(new Date).getTime();s_iTimeElaps=i-s_iPrevTime,s_iCntFps++,s_iPrevTime=i,(s_iCntTime+=s_iTimeElaps)>=1e3&&(s_iCurFps=s_iCntFps,s_iCntTime-=1e3,s_iCntFps=0),a===STATE_GAME&&s_oGame.update(),s_oStage.update(e)}},s_oMain=this,i=e,ENABLE_FULLSCREEN=!1,ENABLE_CHECK_ORIENTATION=!1,GOAL_SCORED=10,GOAL_MISSED=-5,GOAL_SAVED=5,GOAL_SUFFERED=e.score_goal_opponent,AREAS_INFO=[{id:0,probability:100},{id:1,probability:80},{id:2,probability:60},{id:3,probability:80},{id:4,probability:100},{id:5,probability:75},{id:6,probability:60},{id:7,probability:50},{id:8,probability:60},{id:9,probability:75},{id:10,probability:80},{id:11,probability:65},{id:12,probability:70},{id:13,probability:65},{id:14,probability:80}],this.initContainer()}var s_bMobile,s_oPhysicsController,s_iCanvasResizeHeight,s_iCanvasResizeWidth,s_iCanvasOffsetHeight,s_iCanvasOffsetWidth,s_oDrawLayer,s_oStage,s_oCanvas,s_oMain,s_oSpriteLibrary,s_iTeamSelected,s_aSounds,s_aSoundsInfo,s_oNetworkManager,s_bMultiplayer,s_bPlayWithBot,s_oGame,s_bAudioActive=!0,s_bFullscreen=!1,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oSoundtrack=null,s_iLastLevel=1,s_bStorageAvailable=!0;