function CFinalPanel(e,t){var i,_,s,A,a,n,r,l,o,H,h,T,c,d,S,N,L=t;this._init=function(e){i=new Array,_=new Array,(N=new createjs.Container).visible=!1,L.addChild(N),S=new createjs.Shape,A=S.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),S.alpha=.5,S.on("click",(function(){})),N.addChild(S);var t=s_oSpriteLibrary.getSprite("msg_box"),s=createBitmap(t);s.x=CANVAS_WIDTH_HALF,s.y=CANVAS_HEIGHT_HALF,s.regX=t.width/2,s.regY=t.height/2,N.addChild(s),(o=new createjs.Text(TEXT_WIN,"130px "+PRIMARY_FONT,"#fff")).x=CANVAS_WIDTH_HALF,o.y=210,o.textAlign="center",o.textBaseline="alphabetic",N.addChild(o),(l=new createjs.Text("YOU 3-2 CPU","80px "+PRIMARY_FONT,"#fff")).x=CANVAS_WIDTH_HALF,l.y=CANVAS_HEIGHT/2,l.textAlign="center",l.textBaseline="alphabetic",N.addChild(l);var C=s_oSpriteLibrary.getSprite("flag_"+TEAM_LABEL[s_iTeamSelected]);(H=createBitmap(C)).x=CANVAS_WIDTH_HALF-120,H.y=l.y-22,H.regX=C.width/2,H.regY=C.height/2,N.addChild(H),C=s_oSpriteLibrary.getSprite("flag_"+TEAM_LABEL[s_aMatches[e-1]]),(h=createBitmap(C)).x=CANVAS_WIDTH_HALF+120,h.y=l.y-22,h.regX=C.width/2,h.regY=C.height/2,N.addChild(h),(T=new createjs.Text("","58px "+PRIMARY_FONT,"#fff")).x=CANVAS_WIDTH_HALF,T.y=CANVAS_HEIGHT_HALF+190,T.textAlign="center",T.textBaseline="alphabetic",N.addChild(T),(c=new createjs.Text(TEXT_OPPONENT_LEFT,"40px "+PRIMARY_FONT,"#fff")).x=CANVAS_WIDTH_HALF+100,c.y=CANVAS_HEIGHT_HALF+190,c.textAlign="center",c.textBaseline="alphabetic",c.lineWidth=200,c.visible=!1,N.addChild(c),(d=new createjs.Text(TEXT_OPPONENT_WANT_TO_PLAY_AGAIN,"40px "+PRIMARY_FONT,"#fff")).x=CANVAS_WIDTH_HALF,d.y=CANVAS_HEIGHT_HALF+90,d.textAlign="center",d.textBaseline="alphabetic",d.visible=!1,N.addChild(d),(r=new CGfxButton(CANVAS_WIDTH_HALF-130,CANVAS_HEIGHT_HALF+190,s_oSpriteLibrary.getSprite("but_home"),N)).addEventListener(ON_MOUSE_UP,this._onHome,this),(n=new CGfxButton(CANVAS_WIDTH_HALF,CANVAS_HEIGHT_HALF+190,s_oSpriteLibrary.getSprite("but_restart"),N)).addEventListener(ON_MOUSE_UP,this._onRetry,this),(a=new CGfxButton(CANVAS_WIDTH_HALF+130,CANVAS_HEIGHT_HALF+190,s_oSpriteLibrary.getSprite("but_next"),N)).addEventListener(ON_MOUSE_UP,this._onNext,this)},this.unload=function(){a.unload(),r.unload(),n.unload(),S.off("click",A),L.removeChild(N)},this.addEventListener=function(e,t,s){i[e]=t,_[e]=s},this.show=function(e,t,i,_,s){playSound("soundtrack",SOUNDTRACK_GENERAL_VOLUME,!0),l.text=e;var A=s_oSpriteLibrary.getSprite("flag_"+TEAM_LABEL[s_aMatches[s_oGame.getCurLevel()-1]]);h.image=A,T.text="",_?(playSound("goal_keeper",1,!1),o.text=TEXT_LOSE,a.setVisible(!1),r.setX(CANVAS_WIDTH_HALF-100),n.setX(CANVAS_WIDTH_HALF+100)):(playSound("goal_striker",1.25,!1),o.text=TEXT_WIN,a.setVisible(!0),s?(a.setVisible(!1),r.setX(CANVAS_WIDTH_HALF-80),n.setX(CANVAS_WIDTH_HALF+80)):(r.setX(CANVAS_WIDTH_HALF-130),n.setX(CANVAS_WIDTH_HALF),a.setX(CANVAS_WIDTH_HALF+130))),N.alpha=0,N.visible=!0,createjs.Tween.get(N).to({alpha:1},500,createjs.Ease.quartOut),$(s_oMain).trigger("show_interlevel_ad"),$(s_oMain).trigger("save_score",t),$(s_oMain).trigger("share_event",t)},this.hide=function(){createjs.Tween.get(N).to({alpha:0},500,createjs.Ease.quartOut).call((function(){N.visible=!1}))},this.hideLevelScore=function(){},this.changeMessage=function(e){T.text=e},this.showLeaveMsg=function(e){c.visible=e},this.showAgainMsg=function(e){d.visible=e},this.showRestart=function(e){n.setVisible(e)},this.hideButtons=function(){n.setVisible(!1),r.setVisible(!1)},this.showButtons=function(){r.setX(CANVAS_WIDTH_HALF-100),n.setX(CANVAS_WIDTH_HALF+100),n.setVisible(!0),r.setVisible(!0)},this.centerHomeButton=function(){n.setVisible(!1),r.setX(CANVAS_WIDTH_HALF)},this._onNext=function(){s=ON_NEXT,i[s]&&i[s].call(_[s])},this._onRetry=function(){s=ON_RESTART,i[s]&&i[s].call(_[s])},this._onHome=function(){s=ON_BACK_MENU,i[s]&&i[s].call(_[s])},this._init(e)}